# 날짜: 2025-06-11

## 🕛 스크럼
- **오늘 할 일**: MCP 연결 및 API 연동
- **예상 이슈**: 서로 다른 프롬프트 작업 요청에 따라 MCP가 정상적으로 호출되지 않는 문제 발생
- **어제 회고**: 이전에 실패해 연결을 해제해놓은 MCP에 대해 재연결을 시도하고 있다. 단순명확하게 MCP 도구 호출을 요청하면 정상작동하지만 리포트 생성에 필요한 복잡한 프롬프트 속에 포함할 경우 이를 무시하는 현상이 발생한다. 이를 해결하기 위해 요구사항을 보다 직관적으로 수정하고 우선순위를 부여해 해결해 볼 예정이다.
- **공지사항**: -

<br>

## 💼 작업 내용
### 주제 1: MCP 도구 호출을 위한 트러블 슈팅
- 하단 도전과제 참고

### 주제 2: LLM을 통한 SLM 평가 방법 계획 수립(초안)
- **5개 핵심 평가 영역**: 형식 준수도, 콘텐츠 활용도, 톤앤매너, 사용자 경험성, 안전성
- **단계별 검증**: 인간 평가자와 LLM 평가의 일치도를 먼저 확인한 후 자동 평가로 전환
- **다중 LLM 활용**: GPT-4, Claude, Gemini를 함께 사용해 객관성 확보
- *구체적 개선 사이클**: 평가→분석→프롬프트 튜닝→재평가의 반복 구조

<br>

## ✊ 오늘의 도전 과제와 해결 방법
**도전과제 1**: 
- 어제에 이은 MCP 도구 인식은 하나 호출하지 않고 답변에 반영하지 않는 문제

**해결방법 1**: 
### 1. Tool 사용에 우선순위 적용 및 구체적이고 단순명확한 요청
 ```
 먼저 검색 수행 ... 그다음 공지문을 JSON 형식으로 작성
 서울 날씨와 {user.likedSports}의 최신 정보를 검색해주세요. 등
 ```
- 여전히 기존 리포트 생성 프롬프트가 지배적임에 따라 MCP 도구를 호출하지 않음

### 2. 2차 프롬프트 개선
- Tool 사용 지시를 최우선 배치
- Critical과 같은 강력한 지시어 사용
- 구체적 검색 항목 명시
- 위 사항을 반영한 결과 MCP 도구를 호출하지 않음

### 3. 단계 분리 접근
- 기존 기능을 MCP를 활용한 검색 및 요약하는 에이전트와 튜닝 리포트를 생성하는 모델로 분리
- 단순 검색 이후 핵심 정보만 요약하도록 수정
- 이전에 Claude로 생성한 좋은 예시를 기반으로 프롬프트 튜닝
- 그 결과 어느정도 MCP를 통한 검색 엔진도 정상적으로 동작하며 의도한 결과물을 출력하나 답변 퀄리티에서 개선은 여전히 필요

```
Model response: content='{\n    "title": "[속보] ISTJ와 ENFP의 우정 매칭! 오늘의 서울 날씨와 함께라면 더 특별해!",\n    "content": "\\n\\n📰 [뉴스 헤드라인] 오늘, 서울의 맑은 하늘 아래 ISTJ와 ENFP의 우정이 더욱 빛난다!\\n\\n🧠 MBTI 분석: ISTJ와 ENFP의 반대 매력의 법칙\\n\\n오늘은 서울의 날씨가 맑아, 외부 활동하기에 좋다. 오늘의 실온은 약 65°F로 따뜻하며, 바람은 서남쪽에서 불어, 조용한 독서 공간을 즐기기에 적합하다.\\n\\nISTJ와 ENFP는 서로 정반대의 특성을 가지고 있어 \'반대 매력의 법칙\'이 적용된다. ISTJ는 ENFP에게 안정감과 신뢰를 제공하며, ENFP는 ISTJ에게 긍정적인 영향을 줄 수 있다. 이들 사이에서 서로의 부족한 부분을 채워주고, 예상치 못한 시너지를 만들어낼 수 있다. ISTJ는 ENFP의 자유로운 사고방식을 이해하고, ENFP는 ISTJ의 무뚝뚝한 태도를 배울 수 있다.\\n\\n🎯 공통 관심사 발견: 그림 그리기와 음악\\n\\n두 사람이 공통적으로 좋아하는 취미는 그림 그리기와 음악이다. 오늘은 아침과 저녁에 조용한 독서 공간을 즐기고, 오후에는 아늑한 음악 감상 공간을 활용할 수 있다. 또한, 날씨가 맑으니, 가족과 함께 아웃도어 활동을 즐기거나, 친구들과 함께 미술 작품을 감상하는 시간을 가지는 것도 좋은 아이디어다.\\n\\n📱 대화 분석: 85회의 대화는 우정 관계의 발전 단계\\n\\n대화 횟수가 85회라는 것은, 이들은 이미 꽤 오랜 시간 동안 서로를 이해하고 지지하고 있다. 앞으로도 이런 우정은 더욱 굳건해질 것이다. 아마도 오늘은 그림 그리기와 음악을 즐기는 시간을 가질 것일지도?\\n\\n🔮 마무리: 오늘의 날씨와 함께하는 특별한 시간\\n\\n이렇게 맑은 하늘 아래, ISTJ와 ENFP의 우정은 더욱 빛날 것이다. 오늘은 아름다운 하늘 아래서 그림을 그려보거나, 마음에 드는 노래를 들어보는 시간을 가지는 건 어떨까? Stay Tuned! 🌞🎨🎶"\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 618, 'prompt_tokens': 1973, 'total_tokens': 2591, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'Qwen/Qwen2.5-7B-Instruct-AWQ', 'system_fingerprint': None, 'id': 'chatcmpl-188483f789714c3c8ce14ac34a5f8976', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None} id='run--40cc9eaa-657c-468e-82f1-ca14c65d58dc-0' usage_metadata={'input_tokens': 1973, 'output_tokens': 618, 'total_tokens': 2591, 'input_token_details': {}, 'output_token_details': {}}
```

<br>

## 🤔 오늘의 회고(KPT)
- **Keep**: 효과적인 업무수행을 위해 khloé.kim(인공지능)과 사전에 업무분담을 진행했으며 종속적인 작업의 경우 한 사람이 작업하고 있을 때 다른 사람이 그 다음 작업에 대한 계획 작성
- **Problem**: 프롬프트 튜닝이 덜 된 것인지, 모델 크기가 절대적으로 작기 때문인지의 이유로 아직 생성 퀄리티가 만족스럽지 않음.
- **Try**: 추후 생성된 튜닝 리포트를 평가하는 기능이 추가가 필요하다면 멀티 에이전트 개념을 도입해 기능을 명확히 분리하는 것이 좋을 것 같다.

<br>

## 🔗 내용정리 및 참고자료 링크
- [[TroubleShooting - AI] - MCP 도구를 인식하나 호출하지 않고 답변 생성](https://github.com/orgs/100-hours-a-week/projects/166/views/1?pane=issue&itemId=114668254&issue=100-hours-a-week%7C2-hertz-wiki%7C319)
- [노션 정리 - MCP 연결](https://grizzly-crater-c04.notion.site/MCP-20e75a6ebc0a800d8ddfdfda08dd65da?source=copy_link)
- [노션 정리 - 평가 계획 수립](https://grizzly-crater-c04.notion.site/20f75a6ebc0a80ad8422fd3b7c31947f?source=copy_link)
