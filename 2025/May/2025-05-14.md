# 날짜: 2025-05-14

## 🕛 스크럼
- **오늘 할 일**: 사용자 등록 및 임베딩 api 최적화
- **예상 이유**: 최적화 지점 확인 필요
- **어제 회고**: 최종 후보로 Qwen(최선), EXAONE(한국어 특화), HyperClovaX(경량)을 선정하였다. 허나 클라우드 과정에서 진행한 부하테스트 결과 AI 기능 응답시간이 생각보다 길어서 해당 부분에 대한 최적화 처리가 우선하기로 결정함. 1차 개선 결과 4.8초에서 4.6초로 단축했으며 이후 추가 개선 예정

- **팀 이슈**: 대표자 부재로 인한 타운홀미팅 대리 참석(본인 부대표)
- **공지사항**: 코드스터디는 리뷰가 아니니 다른 과정에 대한 이해를 하기 위해 가볍게 접근하자

<br>

## 💼 작업 내용
### 주제 1: 싱글톤 패턴을 적용한 모델 로더 최적화
- 모델 매번 로드하던 기존 방식에서 싱글톤 패턴으로 전환하여 모델 한 번만 메모리에 로드
- 스레드 안전한 이중 검사 잠금 패턴 구현
- 모델 예열 코드 추가로 첫 호출 지연 시간 감소

### 주제 2: 배치 처리를 통한 임베딩 생성 최적화
- 개별 필드마다 모델을 호출하는 대신 모든 필드를 한 번에 배치로 처리
- 전처리 로직 개선으로 유효한 필드만 추출하여 처리
- 여러 필드를 병렬로 처리하여 임베딩 생성 속도 크게 향상
<br>

## ✊ 오늘의 도전 과제와 해결 방법
- **도전과제 1**: 모델 로드 시 메모리 사용량 급증 및 중복 로드 문제
- **해결방법 1**: 싱글톤 패턴 적용하여 모델 인스턴스 공유, 지연 초기화로 필요 시점에만 로드
- **도전과제 2**: 여러 필드 임베딩 생성 시 성능 병목 현상
- **해갈방법 2**: 모든 필드를 배치로 묶어 한 번에 처리하는 로직으로 변경, PyTorch 내부 병렬 처리 활용

<br>


## 🤔 오늘의 회고(KPT)
- **Keep**: 성능 최적화 시 기존 기능을 유지하면서 내부 로직만 개선하는 접근법 유지
- **Problem**: -
- **Try**: 해당 부분만을 개선했을 때 어느정도의 개선률을 보이는지 테스트

<br>

## 🔗 내용정리 및 참고자료 링크
- [노션정리](https://grizzly-crater-c04.notion.site/API-1f375a6ebc0a803ab86cd7ecaa4f3366?pvs=4)
