# 날짜: 2025-05-07

## 🕛 스크럼
- **오늘 할 일**: API 및 부하 테스트
- **예상 이유**: -
- **어제 회고**: logger 안정화 및 모니터링 구축 

- **팀 이슈**: FE 진행 현황에 따라 QA 테스트는 금요일에서 일요일로 변경(추후 일정 조정)
- **공지사항**: 오늘 PL 미팅 13:15 예정

<br>

## 💼 작업 내용
### 주제 1: 단위 및 통합 테스트
- 모듈 임포트 문제
  - ModuleNotFoundError: No module named 'app' 오류 발생
  - 해결: export PYTHONPATH=. 설정으로 프로젝트 루트 경로 인식
- 유사도 매칭 테스트 실패
  - 사용자 #3 데이터 누락으로 테스트 실패
  - 해결: side_effect로 각 사용자별 적절한 목 데이터 설정
- JSON 파싱 오류
  - MagicMock 객체가 JSON 문자열 대신 반환되는 문제
  - 해결: 목 객체가 올바른 JSON 문자열 형식 반환하도록 수정
- 사용자 등록 테스트
  - 중복 방지를 위한 랜덤 사용자 ID 사용
  - data["code"]를 data["detail"]["code"]로 경로 수정


### 주제 2: Swagger 테스트
- v1 기능에 대한 Swagger API 정상 및 에러 응답 동작 확인
- 신규 유저 등록 API
  - 정상 응답: 최초 등록 시 EMBEDDING_REGISTER_SUCCESS 코드와 함께 사용자 ID, 매칭된 사용자 수 반환
  - 에러 응답: 동일 userId 재입력 시 EMBEDDING_CONFLICT_DUPLICATE_ID 에러 발생
  - 검증 에러: 필수 필드(MBTI 등) 누락 시 422 에러와 함께 필드별 오류 메시지 반환
- 튜닝 추천 API
  - 그룹 내 최초 사용자: TUNING_SUCCESS_BUT_NO_MATCH 코드와 함께 null 데이터 반환
  - 정상 매칭: TUNING_SUCCESS 코드와 함께 매칭된 사용자 ID 리스트 반환
  - 입력값 에러: userId가 0 이하인 경우 422 에러로 "Input should be greater than 0" 메시지 반환

### 주제 3: 부하테스트
- 사용자 수 증가 및 동시 요청 상황에서의 시스템 성능 평가
- 병목 현상 파악 및 최적화 포인트 식별을 위함
- 테스트 시나리오
  - 사용자 등록 부하 테스트: 다수 사용자 동시 등록 시 임베딩 생성 및 DB 저장 성능
  - 매칭 추천 부하 테스트: 동시 매칭 요청 시 유사도 검색 성능
  - 사용자 수 확장 테스트: 10→100→500→1,000명으로 점진적 확장 테스트
- 모니터링 지표
  - 응답 시간: 평균, 95/99 퍼센타일, 최대 응답 시간
  - 처리량: 초당 처리 요청 수(RPS), 성공률
  - 리소스 사용: CPU/메모리 사용률, DB 성능
  - 기능별 처리 시간: 임베딩 생성, 유사도 계산, DB 작업 시간

<br>

## ✊ 오늘의 도전 과제와 해결 방법
- **도전과제 1**: -
- **해결방법 1**: -

<br>

## 🤔 오늘의 회고(KPT)
- **Keep**: 실제로 동작시켰을 때 설계 단계에서는 식별하지 못했던 에러들도 있었기에 구현된 기능에 대해 의도한 대로 응답하는지(정상과 에러를 포함해서) 확인하는 과정을 진행함. 즉, 내가 작성한 코드가 올바르게 동작하는지 검증하는 과정이 항상 필요하다. 
- **Problem**: -
- **Try**: PL미팅 피드백으로 로컬이 아닌 클라이언트-서버 단계에서의 테스트 구현을 위한 Playwright를 권유받았기에 이에 대해 조사하고 적용가치에 대해 검토해 볼 것

<br>

## 🔗 내용정리 및 참고자료 링크
- [AI Repo](https://github.com/100-hours-a-week/2-hertz-ai/tree/develop)
